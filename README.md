# androidpn

android 推送的demo

根据androidpn的主框架，对部分细节进行了修改，达到了活用活配置的功能

可以在代码中配置服务器信息，之后通过回调接口对消息进行调用

可以在需要的地方进行调用


AndroidPN全称 Android Push Notification，特点是：

1、快速集成:提供一种比C2DM更加快捷的使用方式,避免各种限制.
2、无需架设服务器:通过使用"云服务",减少额外服务器负担.
3、可以同时推送消息到网站页面,android 手机
4、耗电少,占用流量少.


配置：
1. 如果是模拟器来运行客户端程序,把xmppHost配置成10.0.2.2[模拟器把10.0.2.2认为是所在主机的地址，127.0.0.1是模拟器本身的回环地址，10.0.2.1表示网关地址，10.0.2.3表示DNS地址，10.0.2.15表示目标设备的网络地址]，关于模拟器的详细信息，大家可参阅相关资料，这里不再详述.
    xmppPort=5222 是服务器的xmpp服务监听端口
    运行androidpn-server-0.5.0\bin\run.bat启动服务器，从浏览器访问http://127.0.0.1:7070/index.do (androidPN Server有个轻量级的web服务器，在7070端口监听请求，接受用户输入的文本消息)
    运行客户端，客户端会向服务器发起连接请求，注册成功后，服务器能识别客户端，并维护和客户端的IP长连接。

2. 如果是在同一个局域网内的其他机器的模拟器测试(或者使用同一无线路由器wifi上网的真机) ，则需要把这个值设置为服务器机器的局域网ip.
　　例如 你的电脑和android手机 都通过同一个无线路由器wifi上网, 电脑的ip地址为 192.168.1.2 而 手机的ip地址为 192.168.1.3, 这个时候 需要把这个值修改为 xmppHost=192.168.1.1 或是电脑的IP地址，就可以在手机上使用了.

3. 如果是不在同一个局域网的真机测试，我们需要将这个值设置为服务器的IP地址。


待优化部分：
1、断线重连。服务器再重启需要重启service进行重新连接
2、连接时间过长则无接收推送消息。待测，但是目前来说应该还算稳定

<!－－－－－－－－－－－－－－华丽丽的分割线－－－－－－－－－－－－－－－－－>
Log 2016/6/16 修复了断线重连的问题，通知的跳转问题